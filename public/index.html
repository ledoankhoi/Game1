<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To√°n v√† Logic - C·ªïng Game</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game.css">
    <style>
        /* CSS b·ªï sung ƒë·ªÉ ƒë·∫£m b·∫£o hi·ªÉn th·ªã ƒë·∫πp n·∫øu file css ch∆∞a load k·ªãp */
        .hidden { display: none !important; }
        .back-btn { margin-bottom: 10px; padding: 5px 10px; cursor: pointer; }
        .game-card { cursor: pointer; border: 1px solid #ccc; padding: 10px; margin: 10px; border-radius: 5px; }
        nav ul { display: flex; list-style: none; gap: 15px; }
        nav a { text-decoration: none; font-weight: bold; color: #333; cursor: pointer; }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">To√°n v√† Logic</div>
            <ul>
                <li><a href="#" onclick="MainApp.goHome()">Trang ch·ªß</a></li>
                <li><a href="#" onclick="MainApp.showLeaderboard()">X·∫øp h·∫°ng</a></li>
                
                <li id="menu-auth"><a href="#" onclick="MainApp.showAuth()">ƒêƒÉng Nh·∫≠p</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="game-list" class="container">
            <h1>Ch·ªçn Tr√≤ Ch∆°i</h1>
            <div class="grid-games">
                <div class="game-card" onclick="MainApp.startGame('sequence')">
                    <h3>üî¢ Quy t·∫Øc chu·ªói s·ªë</h3>
                    <p>T√¨m quy lu·∫≠t v√† ƒëi·ªÅn s·ªë c√≤n thi·∫øu.</p>
                </div>
                <div class="game-card" onclick="MainApp.startGame('monster')">
                    <h3>üëæ Di·ªát Qu√°i To√°n H·ªçc</h3>
                    <p>G√µ nhanh ƒë√°p √°n ƒë·ªÉ ti√™u di·ªát qu√°i v·∫≠t!</p>
                </div>
            </div>
        </section>

        <section id="leaderboard-screen" class="game-area hidden">
            <div class="game-header">
                <button class="back-btn" onclick="MainApp.goHome()">‚Üê Quay l·∫°i</button>
                <h2>üèÜ B·∫£ng Phong Th·∫ßn üèÜ</h2>
            </div>
            
            <table border="1" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                <thead>
                    <tr style="background: #f0f0f0;">
                        <th>H·∫°ng</th>
                        <th>Ng∆∞·ªùi ch∆°i</th>
                        <th>ƒêi·ªÉm s·ªë</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    </tbody>
            </table>
        </section>

        <section id="sequence-game-screen" class="game-area hidden">
            <button class="back-btn" onclick="MainApp.goHome()">‚Üê Quay l·∫°i</button>
            <h2>Quy t·∫Øc chu·ªói s·ªë</h2>
            <div id="sequence-content">
                <p>T√¨m s·ªë c√≤n thi·∫øu:</p>
                <div id="seq-display" class="sequence-box" style="font-size: 24px; font-weight: bold; margin: 20px 0;">Loading...</div>
                <div class="input-area">
                    <input type="number" id="seq-input" placeholder="ƒê√°p √°n...">
                    <button onclick="SequenceGame.checkAnswer()">Ki·ªÉm tra</button>
                </div>
                <p id="seq-feedback"></p>
                <button onclick="SequenceGame.nextLevel()" class="next-btn" id="seq-next-btn" style="display:none;">C√¢u ti·∫øp theo</button>
            </div>
        </section>

        <section id="monster-game-screen" class="game-area hidden">
            <div class="game-header" style="display: flex; justify-content: space-between;">
                <button class="back-btn" onclick="MainApp.goHome()">‚Üê Tho√°t</button>
                <div class="score-board">ƒêi·ªÉm: <span id="monster-score">0</span></div>
            </div>
            
            <div id="battlefield" style="height: 300px; background: #eee; position: relative; overflow: hidden; margin-top: 10px;">
                </div>

            <div class="control-panel" style="margin-top: 10px; text-align: center;">
                <input type="number" id="monster-input" placeholder="Nh·∫≠p ƒë√°p √°n..." autofocus style="padding: 10px; width: 50%;">
            </div>
            
            <div id="game-over-overlay" class="hidden" style="position: absolute; top: 100px; left: 0; right: 0; text-align: center; background: rgba(0,0,0,0.8); color: white; padding: 20px;">
                <h2>GAME OVER</h2>
                <button onclick="MonsterGame.start()">Ch∆°i l·∫°i</button>
            </div>
        </section>

        <section id="auth-screen" class="game-area hidden">
            <button class="back-btn" onclick="MainApp.goHome()">‚Üê Quay l·∫°i</button>
            
            <div class="auth-container" style="max-width: 400px; margin: 20px auto; border: 1px solid #ccc; padding: 20px; border-radius: 10px;">
                <h2 id="auth-title" style="text-align: center;">ƒêƒÉng Nh·∫≠p</h2>
                
                <div class="input-group">
                    <div id="group-username" class="hidden">
                        <label>T√™n hi·ªÉn th·ªã:</label>
                        <input type="text" id="reg-username" placeholder="V√≠ d·ª•: HuyPro" style="width: 100%; margin-bottom: 10px;">
                    </div>

                    <label>Email:</label>
                    <input type="email" id="login-email" placeholder="email@example.com" style="width: 100%; margin-bottom: 10px;">
                    
                    <label>M·∫≠t kh·∫©u:</label>
                    <input type="password" id="login-password" placeholder="******" style="width: 100%; margin-bottom: 10px;">
                </div>

                <div class="action-buttons" style="text-align: center;">
                    <button onclick="Auth.handleLogin(event)" id="btn-login" style="background: #3498db; color: white; padding: 10px 20px; border: none; cursor: pointer;">ƒêƒÉng Nh·∫≠p</button>
                    
                    <button onclick="Auth.handleRegister(event)" id="btn-register" class="hidden" style="background: #27ae60; color: white; padding: 10px 20px; border: none; cursor: pointer;">ƒêƒÉng K√Ω</button>
                </div>

                <p class="switch-mode" style="text-align: center; margin-top: 15px;">
                    <span id="text-switch">Ch∆∞a c√≥ t√†i kho·∫£n?</span> 
                    <a href="#" onclick="toggleAuthMode()">B·∫•m v√†o ƒë√¢y</a>
                </p>
            </div>
        </section>
    </main>

    <script src="js/games/sequence.js"></script>
    <script src="js/games/monster.js"></script>
    <script src="js/leaderboard.js"></script>
    <script src="js/main.js"></script>

    <script>
        function toggleAuthMode() {
            const isLogin = !document.getElementById('btn-login').classList.contains('hidden');
            
            if (isLogin) {
                // Chuy·ªÉn sang ƒêƒÉng K√Ω
                document.getElementById('auth-title').innerText = "ƒêƒÉng K√Ω T√†i Kho·∫£n";
                document.getElementById('btn-login').classList.add('hidden');
                document.getElementById('btn-register').classList.remove('hidden');
                document.getElementById('group-username').classList.remove('hidden'); // Hi·ªán √¥ nh·∫≠p t√™n
                document.getElementById('text-switch').innerText = "ƒê√£ c√≥ t√†i kho·∫£n?";
                
                // ƒê·ªìng b·ªô ID cho kh·ªõp v·ªõi main.js (M·∫πo nh·ªè)
                document.getElementById('login-email').id = 'reg-email';
                document.getElementById('login-password').id = 'reg-password';
            } else {
                // Chuy·ªÉn v·ªÅ ƒêƒÉng Nh·∫≠p
                document.getElementById('auth-title').innerText = "ƒêƒÉng Nh·∫≠p";
                document.getElementById('btn-login').classList.remove('hidden');
                document.getElementById('btn-register').classList.add('hidden');
                document.getElementById('group-username').classList.add('hidden'); // ·∫®n √¥ nh·∫≠p t√™n
                document.getElementById('text-switch').innerText = "Ch∆∞a c√≥ t√†i kho·∫£n?";

                // Tr·∫£ l·∫°i ID c≈©
                document.getElementById('reg-email').id = 'login-email';
                document.getElementById('reg-password').id = 'login-password';
            }
        }
    </script>
</body>
</html>